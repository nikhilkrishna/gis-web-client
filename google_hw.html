<html>
  <head>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <h3> Please enter API Key </h3>
    <input id=key  /> 
    <input type="button" id="load" value="Load" onclick="loadScript();" />
    <div id="map"></div>
   
    <script>
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: 20, lng: -160 },
          zoom: 2
        });
        var data = {"type":"FeatureCollection","metadata":{"generated":1482316855000,"url":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson","title":"USGS Significant Earthquakes, Past Month","status":200,"api":"1.5.2","count":17},"features":[{"type":"Feature","properties":{"mag":6.7,"place":"278km ENE of Dili, East Timor","time":1482279435040,"updated":1482310849280,"tz":540,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007lkw","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007lkw.geojson","felt":63,"cdi":5.4,"mmi":4.9,"alert":"green","status":"reviewed","tsunami":1,"sig":725,"net":"us","code":"10007lkw","ids":",us10007lkw,","sources":",us,","types":",dyfi,geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":3.431,"rms":1.13,"gap":18,"magType":"mww","type":"earthquake","title":"M 6.7 - 278km ENE of Dili, East Timor"},"geometry":{"type":"Point","coordinates":[127.8686,-7.5124,151.53]},"id":"us10007lkw"},
{"type":"Feature","properties":{"mag":6.4,"place":"80km WNW of Kirakira, Solomon Islands","time":1482207688590,"updated":1482252802040,"tz":660,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us200082pp","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us200082pp.geojson","felt":4,"cdi":3.4,"mmi":7.23,"alert":"green","status":"reviewed","tsunami":1,"sig":632,"net":"us","code":"200082pp","ids":",at00oigury,us200082pp,pt16355050,","sources":",at,us,pt,","types":",dyfi,geoserve,impact-link,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.476,"rms":1.12,"gap":21,"magType":"mww","type":"earthquake","title":"M 6.4 - 80km WNW of Kirakira, Solomon Islands"},"geometry":{"type":"Point","coordinates":[161.2183,-10.2254,11.33]},"id":"us200082pp"},
{"type":"Feature","properties":{"mag":6.4,"place":"201km S of Tarauaca, Brazil","time":1482067811190,"updated":1482134639647,"tz":-300,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us200082an","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us200082an.geojson","felt":4,"cdi":4,"mmi":2.33,"alert":"green","status":"reviewed","tsunami":0,"sig":632,"net":"us","code":"200082an","ids":",us200082an,","sources":",us,","types":",dyfi,geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":2.812,"rms":0.65,"gap":11,"magType":"mww","type":"earthquake","title":"M 6.4 - 201km S of Tarauaca, Brazil"},"geometry":{"type":"Point","coordinates":[-70.9655,-9.9705,619.4]},"id":"us200082an"},
{"type":"Feature","properties":{"mag":6.3,"place":"169km SE of Taron, Papua New Guinea","time":1481974060260,"updated":1482017888503,"tz":600,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us200081w0","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us200081w0.geojson","felt":2,"cdi":6.1,"mmi":4.28,"alert":"green","status":"reviewed","tsunami":1,"sig":612,"net":"us","code":"200081w0","ids":",us200081w0,","sources":",us,","types":",dyfi,geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":2.324,"rms":0.86,"gap":37,"magType":"mww","type":"earthquake","title":"M 6.3 - 169km SE of Taron, Papua New Guinea"},"geometry":{"type":"Point","coordinates":[153.9523,-5.6934,35.87]},"id":"us200081w0"},
{"type":"Feature","properties":{"mag":7.9,"place":"46km E of Taron, Papua New Guinea","time":1481971872570,"updated":1482161734709,"tz":600,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us200081v8","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us200081v8.geojson","felt":15,"cdi":8.7,"mmi":8.18,"alert":"yellow","status":"reviewed","tsunami":1,"sig":973,"net":"us","code":"200081v8","ids":",pt16352050,us200081v8,at00oibstb,","sources":",pt,us,at,","types":",dyfi,finite-fault,general-text,geoserve,impact-link,losspager,moment-tensor,origin,phase-data,poster,shakemap,","nst":null,"dmin":1.32,"rms":1.06,"gap":17,"magType":"mww","type":"earthquake","title":"M 7.9 - 46km E of Taron, Papua New Guinea"},"geometry":{"type":"Point","coordinates":[153.4495,-4.5091,103.19]},"id":"us200081v8"},
{"type":"Feature","properties":{"mag":5,"place":"8km NW of The Geysers, California","time":1481733665530,"updated":1482256561699,"tz":-480,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/nc72737985","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nc72737985.geojson","felt":1472,"cdi":5.9,"mmi":4.9,"alert":"green","status":"reviewed","tsunami":1,"sig":975,"net":"nc","code":"72737985","ids":",nc72737985,at00oi6p0h,us200080qv,","sources":",nc,at,us,","types":",dyfi,focal-mechanism,geoserve,impact-link,losspager,moment-tensor,nearby-cities,origin,phase-data,scitech-link,shakemap,","nst":85,"dmin":0.01327,"rms":0.06,"gap":26,"magType":"mw","type":"earthquake","title":"M 5.0 - 8km NW of The Geysers, California"},"geometry":{"type":"Point","coordinates":[-122.8413333,38.8221667,1.48]},"id":"nc72737985"},
{"type":"Feature","properties":{"mag":3.95,"place":"9km W of Templeton, California","time":1481716719840,"updated":1482170313558,"tz":-480,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/nc72737765","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nc72737765.geojson","felt":1035,"cdi":4.3,"mmi":5.36,"alert":"green","status":"reviewed","tsunami":1,"sig":670,"net":"nc","code":"72737765","ids":",nc72737765,at00oi6bxr,us200080ps,","sources":",nc,at,us,","types":",dyfi,focal-mechanism,geoserve,impact-link,losspager,moment-tensor,nearby-cities,origin,phase-data,scitech-link,shakemap,","nst":83,"dmin":0.06767,"rms":0.07,"gap":43,"magType":"mw","type":"earthquake","title":"M 4.0 - 9km W of Templeton, California"},"geometry":{"type":"Point","coordinates":[-120.805,35.5606667,4.59]},"id":"nc72737765"},
{"type":"Feature","properties":{"mag":6.9,"place":"93km WSW of Kirakira, Solomon Islands","time":1481310607070,"updated":1481891848176,"tz":660,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us20007zlq","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us20007zlq.geojson","felt":6,"cdi":7.9,"mmi":6.67,"alert":"green","status":"reviewed","tsunami":1,"sig":737,"net":"us","code":"20007zlq","ids":",at00ohxmky,us20007zlq,pt16344050,","sources":",at,us,pt,","types":",dyfi,geoserve,impact-link,impact-text,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.741,"rms":0.9,"gap":26,"magType":"mww","type":"earthquake","title":"M 6.9 - 93km WSW of Kirakira, Solomon Islands"},"geometry":{"type":"Point","coordinates":[161.1227,-10.748,21.06]},"id":"us20007zlq"},
{"type":"Feature","properties":{"mag":6.5,"place":"79km WSW of Kirakira, Solomon Islands","time":1481234167500,"updated":1482212259609,"tz":660,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us20007zbn","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us20007zbn.geojson","felt":null,"cdi":null,"mmi":5.75,"alert":"green","status":"reviewed","tsunami":0,"sig":650,"net":"us","code":"20007zbn","ids":",us20007zbn,","sources":",us,","types":",geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.937,"rms":0.98,"gap":18,"magType":"mww","type":"earthquake","title":"M 6.5 - 79km WSW of Kirakira, Solomon Islands"},"geometry":{"type":"Point","coordinates":[161.3137,-10.8416,12.26]},"id":"us20007zbn"},
{"type":"Feature","properties":{"mag":7.8,"place":"69km WSW of Kirakira, Solomon Islands","time":1481218726380,"updated":1481478985471,"tz":660,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us20007z80","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us20007z80.geojson","felt":27,"cdi":9.1,"mmi":7.48,"alert":"green","status":"reviewed","tsunami":1,"sig":961,"net":"us","code":"20007z80","ids":",at00ohvnon,us20007z80,pt16343053,","sources":",at,us,pt,","types":",dyfi,finite-fault,general-text,geoserve,impact-link,losspager,moment-tensor,origin,phase-data,poster,shakemap,","nst":null,"dmin":1.834,"rms":0.88,"gap":13,"magType":"mww","type":"earthquake","title":"M 7.8 - 69km WSW of Kirakira, Solomon Islands"},"geometry":{"type":"Point","coordinates":[161.3298,-10.676,41]},"id":"us20007z80"},
{"type":"Feature","properties":{"mag":6.5,"place":"160km W of Ferndale, California","time":1481208586730,"updated":1481957826933,"tz":-480,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us20007z6r","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us20007z6r.geojson","felt":2914,"cdi":4.5,"mmi":3.97,"alert":"green","status":"reviewed","tsunami":1,"sig":1100,"net":"us","code":"20007z6r","ids":",at00ohvfux,pt16343051,us20007z6r,nc72734605,","sources":",at,pt,us,nc,","types":",dyfi,general-link,geoserve,impact-link,losspager,moment-tensor,nearby-cities,origin,phase-data,scitech-link,shakemap,","nst":null,"dmin":1.551,"rms":1.08,"gap":55,"magType":"mwb","type":"earthquake","title":"M 6.5 - 160km W of Ferndale, California"},"geometry":{"type":"Point","coordinates":[-126.1528,40.4753,12.08]},"id":"us20007z6r"},
{"type":"Feature","properties":{"mag":6.5,"place":"19km SE of Sigli, Indonesia","time":1481061812440,"updated":1481332835567,"tz":420,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007ghm","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007ghm.geojson","felt":89,"cdi":9.1,"mmi":8.58,"alert":"yellow","status":"reviewed","tsunami":1,"sig":731,"net":"us","code":"10007ghm","ids":",us10007ghm,","sources":",us,","types":",dyfi,geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":0.837,"rms":1.1,"gap":27,"magType":"mww","type":"earthquake","title":"M 6.5 - 19km SE of Sigli, Indonesia"},"geometry":{"type":"Point","coordinates":[96.1076,5.2812,8.19]},"id":"us10007ghm"},
{"type":"Feature","properties":{"mag":5.9,"place":"22km SW of Scarborough, Trinidad and Tobago","time":1481060541360,"updated":1481291482139,"tz":-240,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007ggp","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007ggp.geojson","felt":216,"cdi":5.5,"mmi":4.94,"alert":"green","status":"reviewed","tsunami":0,"sig":654,"net":"us","code":"10007ggp","ids":",us10007ggp,","sources":",us,","types":",dyfi,geoserve,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.286,"rms":1.12,"gap":29,"magType":"mww","type":"earthquake","title":"M 5.9 - 22km SW of Scarborough, Trinidad and Tobago"},"geometry":{"type":"Point","coordinates":[-60.9048,11.0693,34.83]},"id":"us10007ggp"},
{"type":"Feature","properties":{"mag":6.3,"place":"147km NNE of Palue, Indonesia","time":1480900384880,"updated":1481675782438,"tz":480,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007ev8","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007ev8.geojson","felt":2,"cdi":2.8,"mmi":2.43,"alert":"green","status":"reviewed","tsunami":0,"sig":611,"net":"us","code":"10007ev8","ids":",us10007ev8,","sources":",us,","types":",dyfi,geoserve,impact-text,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.732,"rms":1.03,"gap":14,"magType":"mww","type":"earthquake","title":"M 6.3 - 147km NNE of Palue, Indonesia"},"geometry":{"type":"Point","coordinates":[123.3802,-7.3158,526]},"id":"us10007ev8"},
{"type":"Feature","properties":{"mag":6.6,"place":"47km ENE of Karakul, Tajikistan","time":1480083870590,"updated":1481378224199,"tz":480,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007ca5","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007ca5.geojson","felt":27,"cdi":8.3,"mmi":6.62,"alert":"green","status":"reviewed","tsunami":0,"sig":693,"net":"us","code":"10007ca5","ids":",us10007ca5,","sources":",us,","types":",cap,dyfi,geoserve,impact-text,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.736,"rms":0.86,"gap":22,"magType":"mww","type":"earthquake","title":"M 6.6 - 47km ENE of Karakul, Tajikistan"},"geometry":{"type":"Point","coordinates":[74.0208,39.23,17]},"id":"us10007ca5"},
{"type":"Feature","properties":{"mag":7,"place":"149km SSW of Puerto El Triunfo, El Salvador","time":1480013028830,"updated":1480552565566,"tz":-360,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007c4w","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007c4w.geojson","felt":226,"cdi":5.4,"mmi":4.55,"alert":"green","status":"reviewed","tsunami":1,"sig":876,"net":"us","code":"10007c4w","ids":",pt16329050,at00oh5td3,us10007c4w,","sources":",pt,at,us,","types":",cap,dyfi,geoserve,impact-link,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":1.759,"rms":1.14,"gap":20,"magType":"mww","type":"earthquake","title":"M 7.0 - 149km SSW of Puerto El Triunfo, El Salvador"},"geometry":{"type":"Point","coordinates":[-88.8355,11.9597,10.34]},"id":"us10007c4w"},
{"type":"Feature","properties":{"mag":6.9,"place":"37km ESE of Namie, Japan","time":1479761989010,"updated":1481568412819,"tz":540,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/us10007b88","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/us10007b88.geojson","felt":570,"cdi":8.6,"mmi":6.78,"alert":"green","status":"reviewed","tsunami":1,"sig":1223,"net":"us","code":"10007b88","ids":",pt16326050,at00oh0fnm,us10007b88,","sources":",pt,at,us,","types":",cap,dyfi,geoserve,impact-link,losspager,moment-tensor,origin,phase-data,shakemap,","nst":null,"dmin":0.681,"rms":0.86,"gap":59,"magType":"mwb","type":"earthquake","title":"M 6.9 - 37km ESE of Namie, Japan"},"geometry":{"type":"Point","coordinates":[141.4025,37.3917,11.35]},"id":"us10007b88"}],"bbox":[-126.1528,-10.8416,1.48,161.3298,40.4753,619.4]};

        map.data.addGeoJson(data);
      }

      function loadScript()
      {
        var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "https://maps.googleapis.com/maps/api/js?key=" + 
                         document.getElementById('key').textContent
                         + "&callback=initMap";
            console.log(script.src);
            setTimeout(function () {
                  try{
                      if (!google || !google.maps) {
                          //This will Throw the error if 'google' is not defined
                      }
                  }
                  catch (e) {
                      //You can write the code for error handling here
                      //Something like alert('Ah...Error Occurred!');
                  }
              }, 5000);
            document.body.appendChild(script);
        }
    </script>
  </body>
</html>